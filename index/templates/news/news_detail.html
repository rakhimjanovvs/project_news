{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>News | Главная</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'CSS/style.css' %}">
</head>
<body>
<header class="p-3 mb-3 border-bottom">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 link-body-emphasis text-decoration-none">
            <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
                <use xlink:href="#bootstrap"></use>
            </svg>
        </a>
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                <li><a href="/" class="nav-link px-2 link-secondary">Главная</a></li>
                <li><a href="#" class="nav-link px-5 link-body-emphasis">Категории</a></li>
            </ul>
            <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
                <input type="search" placeholder="Search..." aria-label="Search">
            </form>
            {% if user.is_authenticated %}
                <a href="/add/" class ="button button-header">Добавить новость</a>
                <a href="/logout" class ="button button-header" >Выйти</a>
            {% else %}
                <a href="/accounts/login/" class="button button-header">Войти</a>
            {% endif %}
        </div>
    </div>
</header>

<div class="container">
<h1>{{ news.title }}</h1>
<p>{{ news.main_content }}</p>
<p>{{ added_date }}</p>
<hr>

<h3>Комментарии:</h3>
{% for comment in comments %}
<div style="border-bottom: 1px solid #ddd; margin-bottom: 10px; padding: 5px;">
    <strong>{{ comment.author.username }}</strong> ({{ comment.created_at|date:"d.m.Y H:i" }})
    <p>{{ comment.text }}</p>
</div>
{% empty %}
<p>Комментариев пока нет.</p>
{% endfor %}

<hr>
{% if user.is_authenticated %}
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="reg_button send">Отправить</button>
</form>
{% else %}
<p>Пожалуйста, <a href="{% url 'login' %}">войдите</a>, чтобы оставить комментарий.</p>
{% endif %}
</div>
</body>
</html>